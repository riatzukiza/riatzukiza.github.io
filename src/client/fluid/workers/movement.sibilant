
(import Vector-phase-space "./typed-arrays.js")
(add-event-listener
 'message (=> (e)

              (print "got movement message" e)
              (const [[vb1 vb2] [pb1 pb2]] e.data)
              (const velocities (.from-buffers Vector-phase-space vb1 vb2))
              (const positions (.from-buffers Vector-phase-space pb1 pb2))
              (.add-to positions velocities)
              (.post-message self [])
              ))
